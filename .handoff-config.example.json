{
  "$schema": "https://json-schema.org/draft-07/schema",
  "_comment": "Handoff Framework Configuration — See MIGRATION_GUIDE.md for full documentation",
  "version": "1.0.0",
  
  "projectName": "my-project",
  "description": "Brief project description (1-2 sentences)",
  "techStack": ["React", "TypeScript", "Vite", "Supabase"],
  "repositoryUrl": "https://github.com/owner/repo",
  
  "framework": {
    "version": "1.0.0",
    "docsPath": "docs/.handoff",
    "masterIndexPath": "docs/.handoff/00-MASTER-INDEX.md",
    
    "tokenBudget": {
      "_description": "target = optimal, warning = review needed, critical = refactor required",
      "target": 30000,
      "warning": 40000,
      "critical": 50000
    },
    
    "autoGenerated": [
      "docs/.handoff/01-PROJECT-STATE.md"
    ]
  },
  
  "qualityGates": {
    "_description": "Automated checks that must pass before deployment",
    
    "typescript": {
      "_description": "Type check without emitting files. 0 errors = PASS. Timeout in ms.",
      "enabled": true,
      "command": "npx tsc --noEmit",
      "required": true,
      "timeout": 30000
    },
    
    "eslint": {
      "_description": "Linting check. 0 errors = PASS (warnings acceptable). Set required:false to make warnings non-blocking.",
      "enabled": true,
      "command": "npm run lint",
      "required": true,
      "timeout": 20000
    },
    
    "build": {
      "_description": "Production build. Successful build = PASS. Longer timeout for large projects.",
      "enabled": true,
      "command": "npm run build",
      "required": true,
      "timeout": 120000
    },
    
    "routes": {
      "_description": "Discovers all routes in app. Generates JSON manifest. Enable if >10 pages. Token savings: 50K → 3K (17x).",
      "enabled": false,
      "command": "npm run discover:routes",
      "required": false,
      "artifact": "e2e/fixtures/route-manifest.json",
      "timeout": 60000
    },
    
    "ctaGaps": {
      "_description": "Analyzes CTAs vs mockups. Enable for e-commerce/marketing sites. Token savings: 150K → 9K (17x).",
      "enabled": false,
      "command": "npm run audit:cta",
      "required": false,
      "artifact": "reports/cta-gap-analysis.json",
      "timeout": 90000
    },
    
    "accessibility": {
      "_description": "WCAG compliance check. Enable if accessibility required. Token savings: 80K → 7K (11x).",
      "enabled": false,
      "command": "npm run audit:a11y",
      "required": false,
      "artifact": "reports/a11y-audit.json",
      "timeout": 120000
    },
    
    "performance": {
      "_description": "Lighthouse audit. Enable if performance SLA exists. Token savings: 100K → 9K (11x).",
      "enabled": false,
      "command": "npm run audit:performance",
      "required": false,
      "artifact": "reports/performance-audit.json",
      "timeout": 180000
    },
    
    "database": {
      "_description": "Schema analysis. Enable if using database. Token savings: 120K → 16K (7.6x).",
      "enabled": false,
      "command": "npm run audit:database",
      "required": false,
      "artifact": "reports/database-audit.json",
      "timeout": 60000
    },
    
    "testCoverage": {
      "_description": "Unit test coverage. Enable if ≥80% coverage required. Token savings: 200K → 22K (9.3x).",
      "enabled": false,
      "command": "npm run test:coverage",
      "required": false,
      "artifact": "coverage/coverage-summary.json",
      "coverageThreshold": 80,
      "timeout": 120000
    },
    
    "cartSystems": {
      "_description": "Cart/checkout audit. Enable for e-commerce. Token savings: 180K → 20K (9x).",
      "enabled": false,
      "command": "npm run audit:cart",
      "required": false,
      "artifact": "reports/cart-gap-analysis.json",
      "timeout": 60000
    }
  },
  
  "deployment": {
    "_description": "Deployment requirements and settings",
    
    "requiredGates": [
      "typescript",
      "eslint",
      "build"
    ],
    
    "optionalGates": [
      "routes",
      "ctaGaps",
      "accessibility",
      "performance"
    ],
    
    "environments": {
      "_description": "Deployment targets",
      "staging": {
        "_description": "Auto-deploy staging on every push to develop branch",
        "url": "https://staging.example.com",
        "branch": "develop",
        "autoDeployOn": ["push"]
      },
      "production": {
        "_description": "Production requires manual approval before deployment",
        "url": "https://example.com",
        "branch": "main",
        "autoDeployOn": [],
        "requiresApproval": true
      }
    },
    
    "rollback": {
      "_description": "Auto-rollback if >5% errors OR avg response >3s",
      "errorThreshold": 0.05,
      "responseTimeThreshold": 3000
    }
  },
  
  "team": {
    "_description": "Team-specific settings",
    "primaryContact": "tech-lead@example.com",
    "slackChannel": "#project-deployments",
    "onCallSchedule": "https://example.pagerduty.com/schedules/XXXXX"
  },
  
  "metrics": {
    "_description": "Track framework adoption success",
    "baseline": {
      "_description": "Metrics before framework adoption",
      "handoffTime": "30 minutes",
      "tokenUsage": 180000
    },
    "current": {
      "_description": "Current metrics with framework. Update monthly.",
      "handoffTime": "5 minutes",
      "tokenUsage": 3000
    },
    "improvement": {
      "_description": "Auto-calculated: baseline / current",
      "tokenReduction": "60x",
      "timeReduction": "6x"
    }
  },
  
  "advanced": {
    "_description": "Optional advanced settings",
    
    "subagentWorkflows": {
      "_description": "Specialized audit workflows",
      "enabled": true,
      "workflowsPath": "../.handoff-framework/workflows",
      "available": [
        "audit-cart-systems.md",
        "audit-database.md",
        "audit-test-coverage.md",
        "audit-accessibility.md",
        "audit-performance.md",
        "audit-routes.md",
        "audit-cta-gaps.md"
      ]
    },
    
    "customGates": {
      "_description": "Project-specific quality gates",
      "securityScan": {
        "_description": "Custom security scan. Add if security-critical project.",
        "enabled": false,
        "command": "npm run security:scan",
        "required": true,
        "artifact": "reports/security-scan.json"
      }
    },
    
    "integrations": {
      "_description": "External tool integrations",
      "sentry": {
        "_description": "Error tracking integration",
        "enabled": false,
        "dsn": "https://xxxxx@sentry.io/xxxxx"
      },
      "datadog": {
        "_description": "Performance monitoring",
        "enabled": false,
        "apiKey": "DATADOG_API_KEY"
      }
    }
  },
  
  "migration": {
    "_description": "Set by migrate-existing.mts script. Remove this section if initialized fresh.",
    "migrated": false,
    "migrationDate": null,
    "backupPath": null
  }
}
